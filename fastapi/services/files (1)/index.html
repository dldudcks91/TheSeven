<!-- 방법 1: Fetch API -->
    <div class="method-section">
        <h2 class="method-title">1. Fetch API (권장)</h2>
        <p>가장 현대적이고 권장되는 방법입니다.</p>
        
        <div class="form-group">
            <label>플레이어 ID:</label>
            <input type="number" id="userId" value="" />
        </div>
        <div class="form-group">
            <label>건물 ID:</label>
            <input type="number" id="buildingIdx" value="" />
        </div>
        <div class="form-group">
            <label>보유 식량:</label>
            <input type="number" id="resourceFood" value="" />
        </div>
        
        <button onclick="postAPI(2001)">조회</button>
        <button onclick="postAPI(2002)">건설</button>
        <button onclick="postAPI(2003)">레벨업</button>
        <button onclick="postAPI(2004)">완료</button>
        <div id="fetchResult" class="result-box"></div>

        <script>
        // 공통 API 요청 함수
        async function apiRequest(apiCode, data) {
            const response = await fetch('/api', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer your-token-here'
                },
                body: JSON.stringify({
                    user_no: parseInt(document.getElementById('userId').value),
                    api_code: apiCode,
                    data: data
                })
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            return await response.json();
        }

        async function postAPI(api_code) {
            const resultDiv = document.getElementById('fetchResult');
            
            try {
                const requestData = {
                    building_idx: parseInt(document.getElementById('buildingIdx').value),
                    resourceFood: parseInt(document.getElementById('resourceFood').value),
                    timestamp: Date.now()
                };

                resultDiv.textContent = '요청 중...';
                
                const result = await apiRequest(api_code, requestData);
                
                resultDiv.className = 'result-box success';
                resultDiv.textContent = `성공!\n전송한 데이터: ${JSON.stringify(requestData, null, 2)}\n\n응답: ${JSON.stringify(result, null, 2)}`;
                
            } catch (error) {
                resultDiv.className = 'result-box error';
                resultDiv.textContent = `에러 발생: ${error.message}`;
            }
        }
        </script>
    </div>